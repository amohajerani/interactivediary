
{% extends "base.html" %} {% block title %}Write{% endblock %} {% block content %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <div>
    <h1>Chatbot</h1>
    <div class="chatbox" id="chatbox">
    </div>
    <form id="message_form" method="POST" onsubmit="return sendMessage();">
      <input type="text" id="input_text" name="input_text">
      <input type="submit" value="Send" id="submit_button">
    </form>
    <script>
      function addMessage(message, isUser=false) {
        var chatbox = document.getElementById('chatbox');
        var messageClass = isUser ? 'user' : 'bot';
        var messageElement = document.createElement('div');
        messageElement.classList.add('message', messageClass);
        messageElement.textContent = message;
        chatbox.appendChild(messageElement);
        chatbox.scrollTop = chatbox.scrollHeight;
      }

      function sendMessage() {
        var inputText = document.getElementById('input_text').value;
        addMessage(inputText, true);
        $.post('/get_response', $('#message_form').serialize(), function(responseText) {
          addMessage(responseText, false);
        });
        document.getElementById('input_text').value = '';
        return false;
      }
    </script>
  </div>

{% endblock %}